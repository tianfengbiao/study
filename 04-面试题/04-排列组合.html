<script>
    var str = 'abcdefh';
    function fn(str) {
        var cache = {};
        function order(str) {
            var result = [];
            var strLen = str.length;

            if (strLen === 1) {
                return [str];
            }
            if (cache[str]) {
                console.log('使用缓存')
                return cache[str];
            }
            var left = str[0];
            var rest = str.slice(1, strLen);
            var preResult = order(rest);
            for (var i = 0; i < preResult.length; i++) {
                for (var j = 0; j < preResult[i].length + 1; j++) {
                    var temp = preResult[i].slice(0, j) + left + preResult[i].slice(j, preResult[i].length);
                    result.push(temp);
                }
            }
            cache[str] = result;
            return result;
        }
        return order;
    }
    var start = Date.now();

    var a = fn(str);

    // var d = a('abcd');
    // console.log(Date.now() - start, d);

    // var e = a('abcde');
    // console.log(Date.now() - start, e);

    var f = a('abcdef');
    console.log(Date.now() - start, f);

    var g = a('abcdefghij');
    console.log(Date.now() - start, g);



    //定义一个缓存数组，存储已经计算出来的斐波那契数
    //计算的步骤
    //1.先从cache数组中去取想要获取的数字
    //2.如果获取到了，直接使用
    //3.如果没有获取到，就去计算，计算完之后，把计算结果存入cache，然后将结果返回

    //统计执行次数
    var count = 0;
    //创建一个闭包，防止外部修改cache数组，提高安全性
    function createFib() {
        //用于存储数据
        var cache = [];
        function fib(n) {
            count++;
            //如果缓存中有数据，直接返回
            if (cache[n] != undefined) {
                return cache[n];
            }
            //如果缓存中没有就计算
            if (n <= 2) {
                //将计算结果存入数组
                cache[n] = 1;
                return 1;
            }
            var temp = fib(n - 1) + fib(n - 2);
            //将结果存入数据
            cache[n] = temp;
            return temp;
        }
        return fib;
    }


</script>